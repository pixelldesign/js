!function(a){var o=a("#jig-wrap");o.appendTo("#wpbody-content");var e=a("#jig-title"),t=a("#title");e.val(t.val()),a("#title-prompt-text").text(JIG.add_title),e.on("input",function(){t.val(a(this).val())});var i=a("#publish");a(".jig-primary-button-action").text(i.val());var n=a(".jig-hidden-form"),r=a("<form></form").appendTo("#jig-top"),s=a("#jig-sce"),c=a("#jig-preview");function d(){return s[0].contentWindow.generateShortcode()}r.attr({name:"jig-preview-form",id:"jig-preview-form",method:"post",target:"jig-preview",action:n.data("action")}).append(n.contents()),n.remove();var l=!1;window.previewJIG=function(){a("#jig-preview-shortcode").val(d()),l||(s.css("flex-grow",.66),c.css("flex-grow",.34),l=!0),r.submit()};var g=a(".jig-preview-button");g.on("click",function(e){g.addClass("jig-preview-is-loading"),previewJIG(),function(){var e=localStorage.getItem("JIGManualPreviewCounter");if(null===e)e=1,localStorage.setItem("JIGManualPreviewCounter",1);else{if("disabled"===e)return;e++,localStorage.setItem("JIGManualPreviewCounter",e)}return e%10==1}()&&m(e,JIG.try_using_enter,2500)}),a(".jig-save-button").on("click",function(){a("#content").val(d()),i.click()});var v,u=a("#jig-revisions"),f=a(".misc-pub-revisions");function p(e){var o=s.outerHeight()+c.outerHeight()+3,t=(e.pageY-s.offset().top)/o;s.css("flex-grow",t),c.css("flex-grow",1-t)}function m(e,o,t){0===a("#jig-toast").length&&a('<div id="jig-toast">'+o+"</div>").appendTo("body");var i=a("#jig-toast"),n=i.outerWidth();function r(e){i.css({top:e.clientY,left:e.clientX-n-10})}s.addClass("jig-no-pointer-events"),r(e),i.addClass("jig-toast-show"),$doc.on("mousemove",r),setTimeout(function(){s.removeClass("jig-no-pointer-events"),i.removeClass("jig-toast-show"),setTimeout(function(){$doc.off("mousemove",r),i.remove()},200)},t)}0!==f.length&&(v=f.find("a").detach().attr("href"),u.attr({title:f.text(),href:v}),a("#jig-revisions").css("display","flex")),-1!==window.location.href.indexOf("action=edit")&&(o.addClass("jig-existing"),a("#jig-shortcode").val("[justified_image_grid gallery="+a("#post_ID").val()+"]").show().on("click",function(e){a(e.target).select(),document.execCommand("copy"),m(e,JIG.copied,1e3)})),window.getSavedShortcodeForJIG=function(){return a("#content").val()},window.previewLoadedForJIG=function(){g.removeClass("jig-preview-is-loading")},$doc=a(document),a("#jig-grab-hot").on("mousedown",function(e){o.addClass("jig-resizing"),$doc.on("mousemove",p)}),$doc.on("mouseup",function(){o.removeClass("jig-resizing"),$doc.off("mousemove",p)})}(jQuery);